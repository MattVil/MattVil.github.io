<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Daily Quests</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>

<body>

    <canvas id="particle-canvas"></canvas>

    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <h2>üîê Security Check</h2>
            <p>Please enter your access password.</p>
            <input type="password" id="passwordInput" placeholder="Password" class="form-input-pill">
            <button id="loginBtn" class="new-quest-btn daily-type-btn" style="width:100%; margin-top:15px;">Unlock
                App</button>
            <p id="loginError" style="color: #DB4437; margin-top: 10px; display: none;">Wrong password!</p>
        </div>
    </div>

    <main class="hero-section">
        <h1 class="hero-title">
            <span id="period-toggle" class="text-daily">Daily</span>
            <span class="static-text">Quests</span>
        </h1>

        <div id="tasks-panel" class="content-panel active-panel">
            <div class="progress-container">
                <span id="progressEmoji" class="progress-emoji">üò¥</span>
                <div class="progress-bar-bg">
                    <div id="progressBarFill" class="progress-bar-fill"></div>
                </div>
            </div>

            <ul id="questList" class="quest-list"></ul>

            <div id="desktopAddBtnArea" class="desktop-btn-area">
                <button id="desktopToggleFormBtn" class="new-quest-btn daily-type-btn">New Quest</button>
            </div>
        </div>

        <div id="summary-panel" class="content-panel hidden-panel">
            <div class="placeholder-text">Yearly Summary Area</div>
            <!-- DOWN ARROW: Go to Achievements -->
            <div id="nav-arrow-down" class="nav-arrow down" title="Go to Achievements">‚Üì</div>
        </div>

        <div id="achievements-panel" class="content-panel hidden-panel">
            <!-- UP ARROW: Go back to Yearly (Outside the tile) -->
            <div id="nav-arrow-up" class="nav-arrow up" title="Back to Calendar">
                <span class="chevron"></span>
            </div>

            <div class="glass-panel">
                <div class="achievements-grid">
                    <!-- TILE 1: Large (Trend) -->
                    <div class="stat-tile tile-large">
                        <h3>Weekly Trend</h3>
                        <div class="tile-content-placeholder">üìà</div>
                    </div>

                    <!-- TILE 2: Small (Streak) -->
                    <div class="stat-tile">
                        <h3>Streak</h3>
                        <div class="tile-content-placeholder">üî•</div>
                    </div>

                    <!-- TILE 3: Small (Total) -->
                    <div class="stat-tile">
                        <h3>Total</h3>
                        <div class="tile-content-placeholder">üèÜ</div>
                    </div>

                    <!-- TILE 4: Tall (Habits) -->
                    <div class="stat-tile tile-tall">
                        <h3>Hall of Fame</h3>
                        <div class="tile-content-placeholder">üèÖ</div>
                    </div>

                    <!-- TILE 5: Wide (Upcoming) -->
                    <div class="stat-tile tile-wide">
                        <h3>Win Rate</h3>
                        <div class="tile-content-placeholder">üìä</div>
                    </div>
                    <!-- TILE 6: Standard -->
                    <div class="stat-tile">
                        <h3>Best</h3>
                        <div class="tile-content-placeholder">üíé</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="taskForm" class="task-form">
        <div class="task-form-content">
            <button id="closeFormBtn" class="close-form-btn">√ó</button>
            <h2>Add New Quest</h2>

            <form id="questAddForm" class="quest-form">

                <div class="input-group-form">
                    <label for="questTitle">Quest Title</label>
                    <input type="text" id="questTitle" required placeholder="Ex: Drink 2L of water..."
                        class="form-input-pill">
                </div>

                <div class="quest-type-selector">
                    <label>Frequency:</label>
                    <div class="type-options">
                        <input type="radio" name="questType" id="typeDaily" value="DAILY_ONLY" checked>
                        <label for="typeDaily" class="type-label-pill daily-type-pill">Daily</label>

                        <input type="radio" name="questType" id="typeRecurring" value="RECURRING">
                        <label for="typeRecurring" class="type-label-pill daily-type-pill">Periodic</label>

                        <input type="radio" name="questType" id="typeWeekly" value="WEEKLY">
                        <label for="typeWeekly" class="type-label-pill weekly-type-pill">Weekly</label>

                        <input type="radio" name="questType" id="typeMonthly" value="MONTHLY">
                        <label for="typeMonthly" class="type-label-pill monthly-type-pill">Monthly</label>
                    </div>
                </div>

                <div id="recurrenceOptions" class="recurrence-options hidden-recurrence">
                    <label>Specific Days:</label>
                    <div class="day-selector">
                        <input type="checkbox" id="day1" value="1" class="day-input"><label for="day1"
                            class="day-label-pill">Mon</label>
                        <input type="checkbox" id="day2" value="2" class="day-input"><label for="day2"
                            class="day-label-pill">Tue</label>
                        <input type="checkbox" id="day3" value="3" class="day-input"><label for="day3"
                            class="day-label-pill">Wed</label>
                        <input type="checkbox" id="day4" value="4" class="day-input"><label for="day4"
                            class="day-label-pill">Thu</label>
                        <input type="checkbox" id="day5" value="5" class="day-input"><label for="day5"
                            class="day-label-pill">Fri</label>
                        <input type="checkbox" id="day6" value="6" class="day-input"><label for="day6"
                            class="day-label-pill">Sat</label>
                        <input type="checkbox" id="day7" value="0" class="day-input"><label for="day7"
                            class="day-label-pill">Sun</label>
                    </div>
                </div>

                <div class="input-group-form">
                    <label for="questDate">Target Date</label>
                    <input type="date" id="questDate" class="form-input-pill">
                </div>

                <div class="advanced-toggle-wrapper">
                    <button type="button" id="toggleAdvancedBtn" class="advanced-toggle-btn">
                        <span class="toggle-icon">‚ñ∂</span> Advanced Options
                    </button>
                </div>

                <div id="advancedOptions" class="advanced-section hidden-advanced">
                    <label for="questTarget">Daily Target: <span id="targetValue">1</span></label>
                    <div class="slider-container">
                        <input type="range" id="questTarget" min="1" max="5" value="1" step="1" class="form-slider">
                    </div>

                    <div class="input-group-form">
                        <label for="questNotes">Notes</label>
                        <textarea id="questNotes" rows="2" placeholder="Add details, instructions..."
                            class="form-input-pill"></textarea>
                    </div>
                </div>

                <div class="form-actions-group">

                    <div id="editScopeContainer" class="scope-checkbox-wrapper hidden-scope">
                        <input type="checkbox" id="editScopeCheckbox">
                        <label for="editScopeCheckbox">Apply to all</label>
                    </div>

                    <div class="action-buttons-wrapper">
                        <button type="button" id="deleteQuestBtn"
                            class="new-quest-btn delete-btn hidden-action-btn">Delete</button>
                        <button type="submit" id="submitQuestBtn"
                            class="new-quest-btn submit-form-btn daily-type-btn">Add
                            Quest</button>
                    </div>
                </div>

            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

    <script src="daily.js"></script>
    <script src="yearly.js"></script>

    <script src="script.js"></script>
</body>

</html>